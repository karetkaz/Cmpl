inline "/cmplStd/lib/text/encoding/Base64.ci";
char original[*] = "../../cmplGfx/test/asset/image/david.png";
char encoded[*] = "out/base64.enc.txt";
char decoded[*] = "out/base64.dec.png";
inline useBuffer = true;

if (ByteReader reader = FileReader(original)) {
	ByteWriter writer = FileWriter(encoded, useBuffer, false);
	ByteWriter encoder = Base64Encoder {
		writer: writer;
		wrap: 100;
	};

	encoder.write(reader);
	encoder.close();
	writer.close();
	reader.close();
}

if (ByteReader reader = FileReader(encoded)) {
	ByteWriter writer = FileWriter(decoded, useBuffer, false);
	ByteReader decoder = Base64Decoder {
		reader: reader;
	};

	writer.write(decoder);
	decoder.close();
	writer.close();
	reader.close();
}
